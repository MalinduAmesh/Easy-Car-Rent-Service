<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Easy Car Rental</title>
    <link rel="stylesheet" href="Assest/css/main.css">
    <link rel="stylesheet" href="Assest/css/bootstrap.min.css">

    <!-- Google Fonts  -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <!-- END Google Fonts  -->

</head>
<body>

<div class="wrp">
    <nav class="navbar-nav">
        <div class="navbar-width"></div>
        <div class="logo">
            <img alt="logo" class="icon" src="asserts/icons/icon%20-%20hut.png">
            <h1 class="header-title">Easy Car <span>Rental</span></h1>
        </div>
        <nav class="side-nav">
            <button id="btn-manage-home" onclick="showAdminDashboardForm()">
                <i class="fas fa-hamburger"></i>
                <a href="#">Home</a>
            </button>
            <button id="btn-manage-carDetails" onclick="showCarDetailsForm()">
                <i class="fas fa-cart-arrow-down"></i>
                <a href="#">Car Details</a>
            </button>
            <button id="btn-manage-customers" onclick="showManageCustomerForm()">
                <i class="fas fa-user"></i>
                <a href="#">Customer Details</a>
            </button>
            <button id="btn-manage-driverDet" onclick="showDriverForm()">
                <i class="fas fa-user"></i>
                <a href="#">Driver Details</a>
            </button>
            <button id="btn-manage-pendingReq" onclick="loadPendingRequestForm()">
                <i class="fas fa-user"></i>
                <a href="#">Pending Requests</a>
            </button>
            <button id="btn-manage-Payment" onclick="showPaymentForm()">
                <i class="fas fa-user"></i>
                <a href="#"> Payment</a>
            </button>

        </nav>
    </nav>
</div>

<div class="col-10" id="adminHome">
    <h2>DashBoad</h2>
    <hr>
    <div class="col-12 adminHomeBoxModel">

        <div>
            <h3>Number Of Registed
                Users</h3>
            <hr style="margin-top: 5px;margin-bottom: -15px">

            <h1 id="numberOfRegisteredUsersCount"
                style="    margin-top: 28px; text-align: right;margin-right: 30px"></h1>
        </div>

        <div>
            <h3>Total Booking For
                Today</h3>
            <hr style="margin-top: 5px;margin-bottom: -15px">

            <h1 style="     margin-top: 28px;text-align: right;margin-right: 30px"><i class="file alternate icon"
                                                                                      style="color: #8a8a8a"></i>
                10</h1>
        </div>

        <div>
            <h3>Pendding
                Request</h3>
            <hr style="margin-top: 5px;margin-bottom: -15px">

            <h1 style=" text-align: right;margin-right: 30px;margin-top: 28px;"><i class="envelope open icon"
                                                                                   style="color: #8a8a8a"></i>
                06</h1>
        </div>

        <div>
            <h3>Number Of Free
                Drivers</h3>
            <hr style="margin-top: 5px;margin-bottom: -15px">

            <h1 id="DashboadFreeDriversCount" style="margin-top: 28px;text-align: right;margin-right: 30px"></h1>
        </div>

    </div>
</div>

<section class="carDetailsFormSec">

    <div id="carDetailsForm" class="container" style="display: none">

        <div class="col-10" style="display: flex;flex-direction: row;">

            <button class="btn btn-danger" id="btnSearchCarID" style="margin-left:20px;width: 150px"
                    type="button">Search Car
            </button>

            <input class="form-control" id="inputSearchCarId"
                   placeholder="Car ID" style="margin-left: 20px;margin-top: 10px"
                   type="text">

            <button class="btn btn-info" id="AddCarNav" style="margin-left: 144px;width: 150px" type="button">Add
                Car
            </button>

        </div>

        <div class="col-10" id="viewAllCars" style="margin-top: 64px;">
            <div>
                <table class="table" id="carDetailsAdminTable">
                    <thead>
                    <tr>

                        <th scope="col">Car ID</th>
                        <th scope="col">Car Model</th>
                        <th scope="col">Car Type</th>
                        <th scope="col">Car Color</th>
                        <th scope="col">Car TransmissionType</th>
                        <th scope="col">Car Status</th>
                        <th scope="col">Passengers</th>

                    </tr>
                    </thead>
                    <tbody id="tblCarDetails">
                    <tr>
                    </tr>
                    </tbody>
                </table>
            </div>


        </div>
    </div>
</section>

<section class="container" id="UpdateCar" style="display: none">
    <div class="updateCar2">
        <h3>Update Car</h3>
        <hr>
        <div class="updateForm">
            <form>
                <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: space-between">
                    <div class="form-group col-md-4" style=" margin-right: 10px;">
                        <label for="inputCarID">Car ID</label>
                        <input class="form-control" id="inputCarIDUpdate" type="text">
                    </div>
                    <div class="form-group col-md-4" style=" margin-right: 10px;">
                        <label for="inputCarModel">Car Model</label>
                        <input class="form-control" id="inputCarModelUpdate" type="text">
                    </div>
                    <div class="form-group col-md-4" style=" margin-right: 10px;">
                        <label for="inputcarType">Car Type</label>
                        <input class="form-control" id="inputcarTypeUpdate" type="text">
                    </div>
                </div>
                <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: flex-start">
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarTransmissionType">Car Transmission Type</label>
                        <input class="form-control" id="inputcarTransmissionTypeUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarFuelType">Car Fuel Type</label>
                        <input class="form-control" id="inputcarFuelTypeUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarColor">Car Color</label>
                        <input class="form-control" id="inputcarColorUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputpassenger">passenger</label>
                        <input class="form-control" id="inputpassengerUpdate" type="text">
                    </div>
                </div>

                <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: flex-start">
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarDailyRate">Car Daily Rate</label>
                        <input class="form-control" id="inputcarDailyRateUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarMonthlyRate">Car Monthly Rate</label>
                        <input class="form-control" id="inputcarMonthlyRateUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="inputcarFreeKmForADay">Car Free Km For ADay</label>
                        <input class="form-control" id="inputcarFreeKmForADayUpdate" type="text">
                    </div>
                    <div class="form-group col-md-3" style=" margin-right: 10px;">
                        <label for="carFreeKmForAMonth">Car Free Km For A Month</label>
                        <input class="form-control" id="carFreeKmForAMonthUpdate" type="text">
                    </div>
                </div>

                <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: flex-start">
                    <div class="form-group col-md-5" style=" margin-right: 10px;">
                        <label for="inputcarPriceForExtraKM">Car Price For ExtraKM</label>
                        <input class="form-control" id="inputcarPriceForExtraKMUpdate" type="text">
                    </div>
                    <div class="form-group col-md-5" style=" margin-right: 10px;">
                        <label for="inputCarLostWavierUpdate"> LostWavier Fee</label>
                        <input class="form-control" id="inputCarLostWavierUpdate" type="text">
                    </div>
                    <div class="form-group col-md-2" style=" margin-right: 10px;">
                        <label for="inputCarStatus">Car Status</label>
                        <input class="form-control" id="inputCarStatusUpdate" type="text">
                    </div>
                </div>

                <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: flex-start">

                    <div class="col-md-3" style=" margin-right: 10px;">
                        <label for="carImg1Update"> <i class="tags icon"></i> Front View Of Car</label>
                        <input class="form-control" id="carImg1Update" type="text">
                    </div>
                    <div class="col-md-3" style=" margin-right: 10px;">
                        <label for="carImg2Update"> <i class="tags icon"></i> Side View Of Car</label>
                        <input class="form-control" id="carImg2Update" type="text">
                    </div>
                    <div class="col-md-3" style=" margin-right: 10px;">
                        <label for="carImg3Update"> <i class="tags icon"></i> Back View Of Car</label>
                        <input class="form-control" id="carImg3Update" type="text">
                    </div>
                    <div class="col-md-3" style=" margin-right: 10px;">
                        <label for="carImg4Update"> <i class="tags icon"></i> Image Of Your
                            Driving License</label>
                        <input class="form-control" id="carImg4Update" type="text">
                    </div>
                </div>
                <button class="btn btn-warning" id="btnUpdateCar" style="margin-top: 10px" type="button">
                    Update Car
                </button>
            </form>
        </div>


    </div>
    </div>
</section>

<section class="addCar" style="width: 80vw;">

    <div style="margin-left: 294px;display: none" id="AddCar" class="container AddCar">

        <div class="row">
            <div class=" col-md-9">

                <div id="pnlAddNewCar" style="">
                    <h3>Add New Car</h3>
                    <hr>
                    <div>
                        <div class="form-row addCar"
                             style="display: flex;flex-wrap: nowrap;justify-content: flex-start">

                            <div style=" margin-right: 10px;" class="form-group col-md-4">
                                <label for="inputCarID"> ID</label>
                                <input class="form-control" id="inputCarID" type="text">
                            </div>
                            <div class="form-group col-md-4" style=" margin-right: 10px;">
                                <label for="inputCarModel"> Model</label>
                                <input class="form-control" id="inputCarModel" type="text">
                            </div>
                            <div class="form-group col-md-4" style=" margin-right: 10px;">
                                <label for="inputCarType"> Type</label>
                                <input class="form-control" id="inputCarType" type="text">
                            </div>
                        </div>
                        <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: center">
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarTransmissionType"> Transmission Type</label>
                                <input class="form-control" id="inputCarTransmissionType" type="text">
                            </div>
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarFuelType"> Fuel Type</label>
                                <input class="form-control" id="inputCarFuelType" type="text">
                            </div>
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarColor"> Color</label>
                                <input class="form-control" id="inputCarColor" type="text">
                            </div>
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputPassenger">passenger</label>
                                <input class="form-control" id="inputPassenger" type="text">
                            </div>
                        </div>

                        <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: center">
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarDailyRate"> Daily Rate</label>
                                <input class="form-control" id="inputCarDailyRate" type="text">
                            </div>
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarMonthlyRate"> Monthly Rate</label>
                                <input class="form-control" id="inputCarMonthlyRate" type="text">
                            </div>
                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="inputCarFreeKmForADay"> Free Km For ADay</label>
                                <input class="form-control" id="inputCarFreeKmForADay" type="text">
                            </div>
                            <div class="form-group col-md-3">
                                <label for="carFreeKmForAMonth"> Free Km For A Month</label>
                                <input class="form-control" id="carFreeKmForAMonth" type="text">
                            </div>
                        </div>

                        <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: center">
                            <div class="form-group col-md-5" style=" margin-right: 10px;">
                                <label for="inputCarPriceForExtraKM"> Price For ExtraKM</label>
                                <input class="form-control" id="inputCarPriceForExtraKM" type="text">
                            </div>

                            <div class="form-group col-md-5" style=" margin-right: 10px;">
                                <label for="inputCarLostWavier"> LostWavier Fee</label>
                                <input class="form-control" id="inputCarLostWavier" type="text">
                            </div>
                            <div class="form-group col-md-2" style=" margin-right: 10px;">
                                <label for="inputCarStatus"> Status</label>
                                <input class="form-control" id="inputCarStatus" type="text">
                            </div>
                        </div>

                        <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: center">

                            <div class="form-group col-md-3" style=" margin-right: 10px;">
                                <label for="carImg02"> <i class="tags icon"></i> Front View Of Car</label>
                                <input class="form-control" id="carImg01" type="text">
                            </div>

                            <div class="col-md-3" style=" margin-right: 10px;">
                                <label for="carImg02"> <i class="tags icon"></i> Side View Of Car</label>
                                <input class="form-control" id="carImg02" type="text">
                            </div>
                            <div class="col-md-3" style=" margin-right: 10px;">
                                <label for="carImg03"> <i class="tags icon"></i> Back View Of Car</label>
                                <input class="form-control" id="carImg03" type="text">
                            </div>

                            <div class="col-md-3" style=" margin-right: 10px;">
                                <label for="carImg04"> <i class="tags icon"></i> Inside View Of Car</label>
                                <input class="form-control" id="carImg04" type="text">
                            </div>

                        </div>
                        <button class="btn btn-primary" id="btnFinalAddNewCar" style="margin-top: 10px" type="button">
                            Add New Car
                        </button>

                    </div>


                </div>
            </div>
        </div>
    </div>

</section>

<section class="pendingReqFormAdmn">
    <div class="col-10" id="adminRequest"
         style="display: none">

        <h2>Pending Request Details</h2>
        <div class="col-4">
            <div class="ui fluid action input">
                <input class="penddingReqID" placeholder="Search...">
                <button class="penddingReqID-btn-2">Search</button>
            </div>
        </div>
        <hr>


        <div id="viewAllRequests">
            <div>
                <table class="table" id="viewPendingTable">
                    <thead>
                    <tr>
                        <th scope="col">Rent ID</th>
                        <th scope="col">Customer NIC</th>
                        <th scope="col">Customer Name</th>
                        <th scope="col">PickUp Date</th>
                        <th scope="col">DropOff Date</th>
                        <th scope="col">Request Status</th>
                        <th scope="col">Pending Requests</th>

                    </tr>
                    </thead>
                    <tbody id="tblAllRequest">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<section class="adminPaymentForm col-10" id="adminPayment">
    <div class="container">
        <div class="row col-md-12">
            <div class="col-6" style="    margin-left: 28px;">
                <div id="addPaymentMain">
                    <h2 style="font-size: 24px;margin-left: 22px;font-weight: bold">Pay Your Bill</h2>
                    <div class="col-8">
                        <div class="ui fluid action input">
                            <input id="payBillID" class="payBillID" placeholder="Booking ID...">
                            <button id="payBillID-btn-2" class="payBillID-btn-2">Search</button>
                        </div>
                    </div>
                    <hr>
                    <div class="form-row" style="display: flex;flex-direction: row;justify-content: space-between ">

                        <!--                    <div class="form-group col-md-3">-->
                        <!--                        <label for="txtPaymentDate">Date of Payemnt</label>-->
                        <!--                        <input class="form-control" id="txtPaymentDate" type="date">-->
                        <!--                    </div>-->

                        <div class="form-group col-md-4">
                            <label for="txtCusID">Customer ID</label>
                            <input class="form-control" id="txtCusID" type="text">
                        </div>

                        <div class="form-group col-md-4" style="margin-right: 201px;margin-left: 10px">
                            <label for="txtCusName">Customer Name</label>
                            <input class="form-control" id="txtCusName" type="text">
                        </div>
                    </div>

                    <div class="form-row" style="display: flex;    flex-direction: row;">
                        <div class="form-group col-md-4" style="margin-right: 10px">
                            <label for="pickUpDate1">Pick up date</label>
                            <input class="form-control" id="pickUpDate1" type="date">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtReturnDate1"> Return Date</label>
                            <input class="form-control" id="txtReturnDate1" type="date">
                        </div>

                    </div>

                    <div class="form-row" style="display: flex;    flex-direction: row;">
                        <div class="form-group col-md-4" style="margin-right: 10px">
                            <label for="paymentDate">Payment date</label>
                            <input class="form-control" id="paymentDate" type="date">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="paymentPastDays">Late Date count</label>
                            <input class="form-control" id="paymentPastDays" type="number">
                        </div>

                    </div>

                    <!--                <div class="form-row">-->
                    <!--                    <p>Those are your Extra Payment</p>-->
                    <!--                </div>-->

                    <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: space-between">

                        <div class="form-group col-md-3">
                            <label for="txtPayExtraKM">Extra KM</label>
                            <input class="form-control" id="txtPayExtraKM" type="text">
                        </div>

                        <div class="form-group col-md-3" style=" position: relative;right: 254px;">
                            <label for="txtPriceForExtraKM">Price for KM</label>
                            <input class="form-control" id="txtQtyKM" type="text">
                        </div>

                    </div>

                    <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: space-between">

                        <div class="form-group col-md-2">
                            <button class="btn btn-info" id="calExtraKM"
                                    style="margin-top: 27px;margin-left: 10px;height: 40px;    font-size: 14px;">
                                Get Extra KM Price
                            </button>
                        </div>

                        <div class="form-group col-md-3" style=" position: relative;right: 254px;">
                            <label for="txtPriceForExtraKM">Total Price For Extra KM </label>
                            <input class="form-control" id="txtPriceForExtraKM" type="number">
                        </div>

                    </div>


                    <div class="form-row" style="display: flex;flex-direction: row;">
                        <div class="form-group col-md-4" style="margin-right: 10px">
                            <label for="txtDamageDesc">Damage Desc
                            </label>
                            <input class="form-control" id="txtDamageDesc" type="text">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="txtDamageTotal"> Damage Total</label>
                            <input class="form-control" id="txtDamageTotal" type="text">

                        </div>

                    </div>
                    <div class="form-row" style="display: flex;flex-wrap: nowrap;justify-content: space-between">

                        <div class="form-group col-md-4">
                            <label for="txtRentWavieTotal"> Rent Wavier Total</label>
                            <input class="form-control" id="txtRentWavieTotal" type="text">
                        </div>
                        <div class="form-group col-md-4" style="right: 202px;position: relative;">
                            <label for="txtFinalTotal"> Final Total</label>
                            <input class="form-control" id="txtFinalTotal" type="text">
                        </div>
                    </div>

                    <div class="col-8" style="display: flex;flex-direction: row;margin-left: 28px;margin-top: 10px">

                        <button class="btn btn-success" id="btnCalculatefinal">Calculate Date payment</button>
                        <button class="btn btn-warning" id="btnPayBill" style="margin-left: 20px" type="button">   Calculate the lWDf</button>
                        <button class="btn btn-info" id="btnViewAllPaymentDetails" style="margin-left: 20px" type="button">Cal date between payment</button>
                        <button class="btn btn-info" id="placeOrderBtn" style="margin-left: 20px" type="button">Pay the Payments</button>

                    </div>
                </div>

            </div>
            <div class="col-5">
                <div id="viewAllRequests1">
                    <div>
                        <table class="table" id="viewPendingTable1">
                            <thead>
                            <tr>
                                <th scope="col">Car Booking ID</th>
                                <th scope="col">Car ID</th>
                                <th scope="col">Car Name</th>
                                <th scope="col">Car Type</th>
                                <th scope="col">Car Daily Price</th>
                                <th scope="col">For Extra KM</th>
                                <th scope="col">LW Fee</th>
                            </tr>
                            </thead>
                            <tbody id="tblAllRequest1">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        </div>
    </div>
</section>

<script src="Assest/js/jquery-3.6.0.min.js"></script>
<script src="Assest/js/bootstrap.min.js"></script>
<script src="Assest/js/main.js"></script>
<script src="controller/DashboardController.js"></script>

<script>
    $('#btnCalculatefinal').click(function () {
        let bookingID = $("#txtBookingID").val()
        let custNICNumber = $("#custNICNumber").val()
        let rentDate = $("#rentDate").val()
        let returnDate = $("#returnDate").val()
        let driverNICNumber = $("#driverNICNumber").val()
        console.log(bookingID)
        console.log(custNICNumber)
        console.log(rentDate)
        console.log(returnDate)
        console.log(driverNICNumber)
    })

    function showAdminDashboardForm() {
        $('#adminHome').css("display", "block");
        $('#carDetailsForm').css("display", "none");
        $('#adminRequest').css("display", "none");
        $('#AddCar').css("display", "none");
        $('#UpdateCar').css("display", "none");
        $('#adminPayment').css("display", "none");


    }

    function showCarDetailsForm() {
        $('#carDetailsForm').css("display", "block");
        $('#adminRequest').css("display", "none");
        $('#adminHome').css("display", "none");
        $('#AddCar').css("display", "none");
        $('#viewAllCars').css("display", "block");
        $('#adminPayment').css("display", "none");


    }

    $('#AddCarNav').click(function () {

        $('#AddCar').css("display", "block");
        $('#adminRequest').css("display", "none");
        $('#adminHome').css("display", "none");
        $('#carDetailsForm').css("display", "none");
        $('#UpdateCar').css("display", "none");
        $('#adminPayment').css("display", "none");

    })


    function showManageCustomerForm() {

    }

    function showDriverForm() {

    }

    function loadPendingRequestForm() {
        $('#adminRequest').css("display", "block");
        $('#carDetailsForm').css("display", "none");
        $('#adminHome').css("display", "none");
        $('#AddCar').css("display", "none");
        $('#UpdateCar').css("display", "none");
        $('#adminPayment').css("display", "none");


    }

    function showPaymentForm() {

        $('#adminPayment').css("display", "block");
        $('#adminRequest').css("display", "none");
        $('#carDetailsForm').css("display", "none");
        $('#adminHome').css("display", "none");
        $('#AddCar').css("display", "none");
        $('#UpdateCar').css("display", "none");
    }

    $("#btn-manage-carDetails").click(function () {

        $('#tblCarDetails').empty();
        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle",
            contentType: "application/json",
            success: function (res) {
                console.log(res)

                for (var i in res.data) {
                    let carID = res.data[i].carID;
                    let carModel = res.data[i].carModel;
                    let carType = res.data[i].carType;
                    let carColor = res.data[i].carColor;
                    let carTransmissionType = res.data[i].carTransmissionType;
                    let carStatus = res.data[i].carStatus;
                    let passengers = res.data[i].passenger;


                    var row = `<tr><td>${carID}</td><td>${carModel}</td><td>${carType}</td><td>${carColor}</td><td> ${carTransmissionType}</td>
<td> ${carStatus}</td><td> ${passengers}</td><td><button  class="btn btn-warning fff" id="${carID}" onclick="updateDetailsCar(this)">Update</button>
<button class="btn btn-danger " id="${carID}" onclick="DeleteCar(this)">Delete</button></td></tr>`;
                    $('#tblCarDetails').append(row);

                    console.log("END" + i);
                }
            }
        })


    })

    // $(".fff").click(function () {
    //     console.log("updatessssssssss")
    // })

    function updateDetailsCar(id) {
        console.log("update")
        console.log(id)

        var carUpdate = ($(id).attr('id'));
        console.log(carUpdate)

        $('#UpdateCar').css("display", "block");
        $('#viewAllCars').css("display", "none");
        $('#adminRequest').css("display", "none");
        $('#carDetailsForm').css("display", "none");
        $('#adminHome').css("display", "none");
        $('#AddCar').css("display", "none");

        $("#inputCarIDUpdate").val(carUpdate);


        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle/" + carUpdate,
            success: function (res) {
                console.log(res)

                let carModel = res.data.carModel;
                let caType = res.data.carType;
                let carTransType = res.data.carTransmissionType;
                let carColor = res.data.carColor;
                let carStatus = res.data.carStatus;
                let carPassenger = res.data.passenger;

                console.log(carModel)
                console.log(caType)
                console.log(carTransType)
                console.log(carColor)
                console.log(carStatus)

                $('#inputCarModelUpdate').val(carModel);
                $('#inputcarTypeUpdate').val(caType);
                $('#inputcarTransmissionTypeUpdate').val(carTransType);
                $('#inputcarColorUpdate').val(carColor);
                $('#inputCarStatusUpdate').val(carStatus);
                $('#inputpassengerUpdate').val(carPassenger);

            }
        })
    }

    /*-----------------------------------------------------------------Update Car---------------------------------------------------------- */

    $('#btnUpdateCar').click(function () {

        let updatecarID = $('#inputCarIDUpdate').val();
        let updatecarModel = $('#inputCarModelUpdate').val();
        let updatecarType = $('#inputcarTypeUpdate').val();
        let updatecarImg01 = $('#carImg1Update').val();
        let updatecarImg02 = $('#carImg2Update').val();
        let updatecarImg03 = $('#carImg3Update').val();
        let updatecarImg04 = $('#carImg4Update').val();
        let updatecarTransmissionType = $('#inputcarTransmissionTypeUpdate').val();
        let updatecarFuelType = $('#inputcarFuelTypeUpdate').val();
        let updatecarColor = $('#inputcarColorUpdate').val();
        let updatecarStatus = $('#inputCarStatusUpdate').val();
        let updatepassenger = $('#inputpassengerUpdate').val();
        let updateLostWavierFee = $('#inputCarLostWavierUpdate').val();
        let updatecarDailyRate = $('#inputcarDailyRateUpdate').val();
        let updatecarMonthlyRate = $('#inputcarMonthlyRateUpdate').val();
        let updatecarFreeKmForADay = $('#inputcarFreeKmForADayUpdate').val();
        let updatecarFreeKmForAMonth = $('#carFreeKmForAMonthUpdate').val();
        let updatecarPriceForExtraKM = $('#inputcarPriceForExtraKMUpdate').val();


        $.ajax({
            method: 'put',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle",
            contentType: 'application/json',
            data: JSON.stringify({
                "carID": updatecarID,
                "carModel": updatecarModel,
                "carType": updatecarType,
                "carImg1": updatecarImg01,
                "carImg2": updatecarImg02,
                "carImg3": updatecarImg03,
                "carImg4": updatecarImg04,
                "carTransmissionType": updatecarTransmissionType,
                "rentLosWaiver": updateLostWavierFee,
                "carFuelType": updatecarFuelType,
                "carColor": updatecarColor,
                "carStatus": updatecarStatus,
                "passenger": updatepassenger,
                "carDailyRate": updatecarDailyRate,
                "carMonthlyRate": updatecarMonthlyRate,
                "carFreeKmForADay": updatecarFreeKmForADay,
                "carFreeKmForAMonth": updatecarFreeKmForAMonth,
                "carPriceForExtraKM": updatecarPriceForExtraKM
            }),
            success: function (res) {

                console.log(res);
                alert("SuccessFully Updated !")
            }
        })
    })

    /*-------------------------------------------------------------------   Delete Car ----------------------------------------------------------*/

    function DeleteCar(id) {

        var carDelete = ($(id).attr('id'));
        console.log(carDelete)

        $.ajax({
            method: "delete",
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle/delete/" + carDelete,


            success: function (res) {

                alert("car Deleted SuccessFully");

                updateDetailsCar(id);

            }
        })
    }

    $('#btnSearchCarID').click(function () {

        let searchCarID = $('#inputSearchCarId').val();

        console.log(searchCarID)

        $.ajax({
            method: 'put',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle/"
        })
    })

    /* ---------------------------------------------------------   Pending Request Form ------------------------------------------------*/

    $('#btn-manage-pendingReq').click(function () {
        $('#tblAllRequest').empty();
        console.log("Hellow Pendin Admin")
        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/rent",
            contentType: "application/json",
            async: true,
            success: function (res) {
                console.log("Print Status " + res.data[0].rentStatus);

                for (var i in res.data) {
                    let rentID = res.data[i].rentID;
                    let cusID = res.data[i].cusID.cusNicID;
                    let cusName = res.data[i].cusID.name;
                    let pickUpDate = res.data[i].pickUpDate;
                    let returnDate = res.data[i].returnDate;
                    let rentStatus = res.data[i].rentStatus;
                    let RealStatus = res.data[i].rentStatus

                    if (RealStatus == 'avalible') {

                        var row = `<tr><td>${rentID}</td><td>${cusID}</td><td>${cusName}</td><td>${pickUpDate}</td><td> ${returnDate}</td>
    <td> ${rentStatus}</td><td><button  class="btn btn-warning fff" id="${rentID}" onclick="updateRentStatus(this)">OK</button>
        <button class="btn btn-danger " id="${rentID}" onclick="DeleteRentRow(this)">Delete</button></td></tr>`;
                        $('#tblAllRequest').append(row);
                    }
                }
            }
        })

    })


    /* -------------------------------------------------------- Update Rent Status -------------------------------------------------- */

    function updateRentStatus(id) {

        var getRentID = ($(id).attr('id'));
        console.log(getRentID)
        let rentID;
        let rentStauts;
        let rentLostRecipt;
        let pickUpDate;
        let returnDate;
        let rentTotal;
        let cusID;

        let rentDetID;
        let rentLostFee;
        let rentIDMap;
        let carID;
        let driverID;


        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/rent/" + getRentID,
            contentType: "application/json",
            async: true,
            success: function (res) {

                // console.log(res.data.cusID.cusNicID)
                // console.log("RentDetail ID"+res.data.rentDetails[0].rentDetailID)

                var count = res.data;
                console.log(res)

                // var count = res.data[0].rentDetails[0].dIC.driver_NIC;

                var tableArr = [];
                console.log("Welcome to the jungle")

                rentID = res.data.rentID;
                cusID = res.data.cusID.cusNicID
                rentStauts = res.data.rentStatus;
                rentLostRecipt = res.data.rentLosWaiverRecipt;
                pickUpDate = res.data.pickUpDate;
                returnDate = res.data.returnDate;
                rentTotal = res.data.rentTotal;
                console.log("Welcome To the Middle Jingle" + rentID)
                for (var i = 0; i < count.rentDetails.length; i++) {
                    tableArr.push({
                        rentDetID: res.data.rentDetails[i].rentDetailID,
                        rentLostFee: res.data.rentDetails[i].rentLosWaiver,
                        rentIDMap: res.data.rentDetails[i].rID.rentID,
                        carID: res.data.rentDetails[i].cID.carID,
                        driverID: res.data.rentDetails[i].dIC.driver_NIC,
                    })

                    console.log("Table Array" + JSON.stringify(tableArr))

                    var bookingTable = [];
                    const testData = tableArr.values();
                    for (const value of testData) {
                        bookingTable.push({
                            "bookDetailID": value.rentDetID,
                            "bookLoseWFee": value.rentLostFee,
                            "bID": {
                                "bookID": value.rentIDMap
                            },
                            "cID": {
                                "carID": value.carID
                            },
                            "dIC": {
                                "driver_NIC": value.driverID
                            }
                        })
                    }
                    console.log("Booking Table" + JSON.stringify(bookingTable))

                }
                $.ajax({
                    method: 'post',
                    url: "http://localhost:8080/EasyCarBackEnd_war_exploded/booking",
                    contentType: "application/json",
                    async: true,
                    data: JSON.stringify({

                        "bookID": rentID,
                        "cusID": {
                            "cusNicID": cusID,
                        },
                        "bookStatus": rentStauts,
                        "bookLosWaiverRecipt": rentLostRecipt,
                        "bookPickUpDate": pickUpDate,
                        "bookReturnDate": returnDate,
                        "bookRentTotal": rentTotal,

                        "bookingDetails": bookingTable


                    })
                })
            }


        })


        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/rent/" + getRentID,
            contentType: "application/json",
            async: true,
            success: function (res) {

                // console.log(res.data.cusID.cusNicID)
                // console.log("RentDetail ID"+res.data.rentDetails[0].rentDetailID)

                var count = res.data;
                console.log(res)

                // var count = res.data[0].rentDetails[0].dIC.driver_NIC;

                var tableArr = [];
                console.log("Welcome to the jungle")

                rentID = res.data.rentID;
                cusID = res.data.cusID.cusNicID
                rentStauts = "Unavailable";
                rentLostRecipt = res.data.rentLosWaiverRecipt;
                pickUpDate = res.data.pickUpDate;
                returnDate = res.data.returnDate;
                rentTotal = res.data.rentTotal;
                console.log("Welcome To the Middle Jingle" + rentID)
                for (var i = 0; i < count.rentDetails.length; i++) {
                    tableArr.push({
                        rentDetID: res.data.rentDetails[i].rentDetailID,
                        rentLostFee: res.data.rentDetails[i].rentLosWaiver,
                        rentIDMap: res.data.rentDetails[i].rID.rentID,
                        carID: res.data.rentDetails[i].cID.carID,
                        driverID: res.data.rentDetails[i].dIC.driver_NIC,
                    })

                    console.log("Table Array" + JSON.stringify(tableArr))

                    var bookingTable = [];
                    const testData = tableArr.values();
                    for (const value of testData) {
                        bookingTable.push({
                            "rentDetailID": value.rentDetID,
                            "rentLosWaiver": value.rentLostFee,
                            "dIC": {
                                "driver_NIC": value.driverID
                            },
                            "rID": {
                                "rentID": value.rentIDMap
                            },
                            "cID": {
                                "carID": value.carID
                            }
                        })
                    }
                    console.log("Booking Table" + JSON.stringify(bookingTable))

                }
                $.ajax({
                    method: 'put',
                    url: "http://localhost:8080/EasyCarBackEnd_war_exploded/rent",
                    contentType: 'application/json',
                    data: JSON.stringify({
                        "rentID": rentID,
                        "cusID": {
                            "cusNicID": cusID,
                        },
                        "pickUpDate": pickUpDate,
                        "returnDate": returnDate,
                        "rentStatus": rentStauts,
                        "rentLosWaiverRecipt": rentLostRecipt,
                        "rentTotal": rentTotal,

                        "rentDetails": bookingTable
                    })

                })
            }
        })
    }

    //
    // function DeleteRentRow(id) {
    //
    //     let carDelete = ($(id).attr('id'));
    //     console.log(carDelete)
    //
    //     $.ajax({
    //         method: "delete",
    //         url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle/delete/" + carDelete,
    //
    //         success: function (res) {
    //
    //             alert("Reomoved SuccessFully");
    //
    //             updateRentStatus(id);
    //
    //         }
    //     })
    // }

    $('#payBillID-btn-2').click(function () {

        let bookingID = $('#payBillID').val();

        //    Get All Booking Details
        $.ajax({
            method: 'get',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/booking/" + bookingID,
            success: function (res) {

                let lostWFeeRecipt = res.data.bookLosWaiverRecipt;
                let pickUpDate = res.data.bookPickUpDate;
                let returnDate = res.data.bookReturnDate;
                let rentTotal = res.data.bookRentTotal;
                let bookStatus = res.data.bookStatus;
                let customerID = res.data.cusID.cusNicID;
                let customerName = res.data.cusID.name;

                console.log("Payment Jungle")
                console.log(res)

                let count = res.data;
                for (let i = 0; i < count.bookingDetails.length; i++) {

                    let bookingDID = count.bookingDetails[i].bookDetailID;

                    let bookingLostWFee = count.bookingDetails[i].bookLoseWFee;
                    let bookingID2 = res.data.bookingDetails[i].bID.bookID;

                    let carID = res.data.bookingDetails[i].cID.carID;
                    let customerModel = res.data.bookingDetails[i].cID.carModel;
                    let carType = res.data.bookingDetails[i].cID.carType;
                    let carDailRate = res.data.bookingDetails[i].cID.carDailyRate;
                    let carMonthRate = res.data.bookingDetails[i].cID.carMonthlyRate;
                    let carFreeKM = res.data.bookingDetails[i].cID.carFreeKmForDay;

                    let driverID = res.data.bookingDetails[i].dIC.driver_NIC;


                    var row = `<tr><td> ${bookingDID}</td><td>${carID}</td><td>${customerModel}</td><td>${carType}</td><td>${carDailRate}</td>
                    <td> ${carFreeKM}</td><td> ${bookingLostWFee}</td></tr>`;
                    $('#tblAllRequest1').append(row);
                }

                $('#txtCusID').val(customerID);
                $('#txtCusName').val(customerName);
                $('#pickUpDate1').val(pickUpDate);
                $('#txtReturnDate1').val(returnDate);
                $('#txtRentWavieTotal').val(rentTotal);


            }


        })








    })
    function PriceForExtraKM() {

        let extraKm = $('#txtPayExtraKM').val()
        let priceForKM = $('#txtQtyKM').val()

        console.log(extraKm+""+""+priceForKM)

        let Total = (extraKm*priceForKM);
        let newTotal = $('#txtPriceForExtraKM').val(Total)

        let forDateFee = parseInt($('#txtFinalTotal').val());
        let forExtraKM = parseInt($('#txtPriceForExtraKM').val());

        let lastTot = (forDateFee+forExtraKM)
        let LastTotal = parseInt($('#txtFinalTotal').val(lastTot));

    }
    function calculateDatePrice() {
        var dropdt = new Date($('#txtReturnDate1').val());
        var pickdt = new Date($('#pickUpDate1').val());

        getDifferenceInDays(dropdt,pickdt) ;
    }
    function getDifferenceInDays(dropdt,pickdt){

        const diffInMs = Math.abs(dropdt-pickdt);
        let newVal =diffInMs / (1000 * 60 * 60 * 24);
        newVal*=100;

        //Set the Extra Km and date between values to the final Total
        let finalTot = $('#txtFinalTotal').val(newVal);

    }

// Call Extra Km Caluculation
    $('#calExtraKM').click(function (){
        PriceForExtraKM();
    })

    // Call Date Caluculation
    $('#btnCalculatefinal').click(function () {
        calculateDatePrice()

    })

    function paymentLostDate(){

        var dropdt = new Date($('#txtReturnDate1').val());
        var pickdt = new Date($('#paymentDate').val());

        getDifferenceInDaysLate(dropdt,pickdt) ;

    }

    function getDifferenceInDaysLate(dropdt,pickdt) {

        const diffInMs = Math.abs(pickdt-dropdt);
        let newVal =diffInMs / (1000 * 60 * 60 * 24);

        newVal*=500;

        let finalTot = $('#paymentPastDays').val(newVal);
        let finalTot1 = $('#paymentPastDays').val();



       let finalTotForAll =  parseInt($('#txtFinalTotal').val());
       let finalForAll =  parseInt($('#paymentPastDays').val());

       let lastDayDif = (finalTotForAll+finalForAll)
        $('#txtFinalTotal').val(lastDayDif);





    }

    $('#btnViewAllPaymentDetails').click(function () {

        paymentLostDate();
    })

    function DamageForVehicle(){

        let getDamage = parseInt($('#txtDamageTotal').val());
        let lostWFee = parseInt($('#txtRentWavieTotal').val());

        let incremetTheLWF = ((lostWFee-getDamage));

        //Set the incremetn value to the lwf
        let lostWfeeIncremetnTot = $('#txtRentWavieTotal').val(incremetTheLWF);

        //Set the dmg value to the final
        let finalTot = parseInt($('#txtFinalTotal').val());
        let getDamageFromCar = parseInt($('#txtDamageTotal').val());

        let setvalueToTheFinalInput = ((finalTot+getDamageFromCar))

        $('#txtFinalTotal').val(setvalueToTheFinalInput);

        console.log(incremetTheLWF)
    }

    $('#btnPayBill').click(function () {

        DamageForVehicle();
    });

    $('#placeOrderBtn').click(function () {

        let bookID = $('#payBillID').val()
        let cusID = $('#txtCusID').val()
        let bookStatus = "Done";
        let lastTotalFee = $('#txtFinalTotal').val()
        let pickUpDate = $('#pickUpDate1').val()
        let returnDate = $('#paymentDate').val()

        let table2 = document.getElementById("tblAllRequest1");
        var tableArray = [];
        for (var i =0;i<table2.rows.length;i++){
            tableArray.push({
                bookDID:table2.rows[i].cells[0].innerHTML,
                bookLostFee:table2.rows[i].cells[6].innerHTML,
                carId2:table2.rows[i].cells[1].innerHTML,
                driverId2:"Not here",
                bookID2:bookID
            })
            console.log(tableArray)
        }

        var bookingTable = [];
        const testData = tableArray.values();
        for (const value of testData) {
                    bookingTable.push({
                        "bookDetailID": value.bookDID,
                        "bookLoseWFee": value.bookLostFee,
                        "dIC": {
                            "driver_NIC": value.driverId2
                        },
                        "bID": {
                            "bookID": value.bookID2
                        },
                        "cID": {
                            "carID": value.carId2
                        }
                    })
                }

            $.ajax({
            method:'put',
            url: "http://localhost:8080/EasyCarBackEnd_war_exploded/booking",
            contentType: 'application/json',
            data: JSON.stringify({

                "bookID": bookID,
                "cusID": {
                    "cusNicID": cusID,
                },
                "bookPickUpDate": pickUpDate,
                "bookReturnDate": returnDate,
                "bookStatus": bookStatus,
                "bookLosWaiverRecipt": "Already Got it",
                "bookRentTotal": lastTotalFee,

                "bookingDetails": bookingTable

            })
        })

    })

</script>
</body>
</html>



<!--$('#btnUpdateCar').click(function () {-->

<!--let updatecarID = $('#inputCarIDUpdate').val();-->
<!--let updatecarModel = $('#inputCarModelUpdate').val();-->
<!--let updatecarType = $('#inputcarTypeUpdate').val();-->
<!--let updatecarImg01 = $('#carImg1Update').val();-->
<!--let updatecarImg02 = $('#carImg2Update').val();-->
<!--let updatecarImg03 = $('#carImg3Update').val();-->
<!--let updatecarImg04 = $('#carImg4Update').val();-->
<!--let updatecarTransmissionType = $('#inputcarTransmissionTypeUpdate').val();-->
<!--let updatecarFuelType = $('#inputcarFuelTypeUpdate').val();-->
<!--let updatecarColor = $('#inputcarColorUpdate').val();-->
<!--let updatecarStatus = $('#inputCarStatusUpdate').val();-->
<!--let updatepassenger = $('#inputpassengerUpdate').val();-->
<!--let updateLostWavierFee = $('#inputCarLostWavierUpdate').val();-->
<!--let updatecarDailyRate = $('#inputcarDailyRateUpdate').val();-->
<!--let updatecarMonthlyRate = $('#inputcarMonthlyRateUpdate').val();-->
<!--let updatecarFreeKmForADay = $('#inputcarFreeKmForADayUpdate').val();-->
<!--let updatecarFreeKmForAMonth = $('#carFreeKmForAMonthUpdate').val();-->
<!--let updatecarPriceForExtraKM = $('#inputcarPriceForExtraKMUpdate').val();-->


<!--$.ajax({-->
<!--method: 'put',-->
<!--url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle",-->
<!--contentType: 'application/json',-->
<!--data: JSON.stringify({-->
<!--"carID": updatecarID,-->
<!--"carModel": updatecarModel,-->
<!--"carType": updatecarType,-->
<!--"carImg1": updatecarImg01,-->
<!--"carImg2": updatecarImg02,-->
<!--"carImg3": updatecarImg03,-->
<!--"carImg4": updatecarImg04,-->
<!--"carTransmissionType": updatecarTransmissionType,-->
<!--"rentLosWaiver": updateLostWavierFee,-->
<!--"carFuelType": updatecarFuelType,-->
<!--"carColor": updatecarColor,-->
<!--"carStatus": updatecarStatus,-->
<!--"passenger": updatepassenger,-->
<!--"carDailyRate": updatecarDailyRate,-->
<!--"carMonthlyRate": updatecarMonthlyRate,-->
<!--"carFreeKmForADay": updatecarFreeKmForADay,-->
<!--"carFreeKmForAMonth": updatecarFreeKmForAMonth,-->
<!--"carPriceForExtraKM": updatecarPriceForExtraKM-->
<!--}),-->
<!--success: function (res) {-->

<!--console.log(res);-->
<!--alert("SuccessFully Updated !")-->
<!--}-->
<!--})-->
<!--})-->
<!--$('#tblCarDetails').empty();-->
<!--$.ajax({-->
<!--method: 'get',-->
<!--url: "http://localhost:8080/EasyCarBackEnd_war_exploded/vehicle",-->
<!--contentType: "application/json",-->
<!--success: function (res) {-->
<!--console.log(res)-->

<!--for (var i in res.data) {-->
<!--let carID = res.data[i].carID;-->
<!--let carModel = res.data[i].carModel;-->
<!--let carType = res.data[i].carType;-->
<!--let carColor = res.data[i].carColor;-->
<!--let carTransmissionType = res.data[i].carTransmissionType;-->
<!--let carStatus = res.data[i].carStatus;-->
<!--let passengers = res.data[i].passenger;-->


<!--var row = `<tr><td>${carID}</td><td>${carModel}</td><td>${carType}</td><td>${carColor}</td><td> ${carTransmissionType}</td>-->
<!--    <td> ${carStatus}</td><td> ${passengers}</td><td><button  class="btn btn-warning fff" id="${carID}" onclick="updateDetailsCar(this)">Update</button>-->
<!--        <button class="btn btn-danger " id="${carID}" onclick="DeleteCar(this)">Delete</button></td></tr>`;-->
<!--$('#tblCarDetails').append(row);-->

<!--console.log("END" + i);-->
<!--}-->
<!--}-->
<!--})-->


<!--})-->
